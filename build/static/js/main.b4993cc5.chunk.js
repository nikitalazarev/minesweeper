(this.webpackJsonpminesweeper_ts=this.webpackJsonpminesweeper_ts||[]).push([[0],{14:function(e,o,t){},15:function(e,o,t){},19:function(e,o,t){"use strict";t.r(o);var n=t(0),s=t.n(n),r=t(3),l=t.n(r),a=(t(14),t(4)),c=t(5),i=t(7),u=t(6),p=t(1),m=t(8),f=(t(15),t(16)),w=function(e){function o(e){var t;return Object(a.a)(this,o),(t=Object(i.a)(this,Object(u.a)(o).call(this,e))).state={cellsMount:{row:8,col:10},minesMount:10,result:{isWin:!1,open:!1},winTitles:["YOU WIN!","GAME OVER"],cells:new Array},t.openCell=t.openCell.bind(Object(p.a)(t)),t.markCell=t.markCell.bind(Object(p.a)(t)),t.restart=t.restart.bind(Object(p.a)(t)),t}return Object(m.a)(o,e),Object(c.a)(o,[{key:"openCell",value:function(e){var o=this.state.cells.map((function(e){return e}));if("mark"!==o[e.row][e.col].state){if(o[e.row][e.col].state="open",o[e.row][e.col].isMine)o.map((function(e){e.map((function(e){e.isMine?e.state="open mine inactive":e.state="".concat(e.state," inactive")}))}));else for(var t=[],n=0;n<o.length;n++)for(var s=0;s<o[n].length;s++)o[n][s].cellsAround&&0===o[n][s].minesAround&&"open"===o[n][s].state&&!t.includes(o[n][s].id)&&(o[n][s].cellsAround.map((function(e){e.state="open"})),t.push(o[n][s].id),n=0,s=0);this.setState({cells:o}),this.checkResult("open",o)}}},{key:"markCell",value:function(e){var o=this.state.cells.map((function(e){return e}));"close"===o[e.row][e.col].state?o[e.row][e.col].state="mark":"mark"===o[e.row][e.col].state&&(o[e.row][e.col].state="close"),this.setState({cells:o}),this.checkResult("mark",o)}},{key:"checkResult",value:function(e,o){if("mark"===e){var t=0,n=0;o.map((function(e){e.map((function(e){"mark"===e.state&&(e.isMine?t++:n++)}))}));var s=t===this.state.minesMount&&!n;s&&o.map((function(e){e.map((function(e){e.state=e.state+" inactive"}))})),s&&this.setState({cells:o,result:{isWin:s,open:!0}})}if("open"===e){var r=!0;o.map((function(e){e.map((function(e){"open mine inactive"===e.state&&(r=!1)}))})),r||this.setState({result:{isWin:r,open:!0}})}}},{key:"restart",value:function(){for(var e=this.state,o=e.minesMount,t=e.cellsMount,n=f.shuffle(f.range(t.row*t.col)),s=f.range(o).map((function(e){return n[e]})),r=new Array,l=0,a=0;a<t.row;a++){r[a]=new Array;for(var c=0;c<t.col;c++){var i={id:l,pos:{row:a,col:c},isMine:s.includes(l),cellsAround:new Array,minesAround:null,state:"close"};r[a].push(i),l++}}r.map((function(e){e.map((function(e){if(!e.isMine){for(var o=-1,t=0,n=0;n<3;n++)r[e.pos.row-1]&&r[e.pos.row-1][e.pos.col+o]&&(e.cellsAround.push(r[e.pos.row-1][e.pos.col+o]),r[e.pos.row-1][e.pos.col+o].isMine&&t++),r[e.pos.row+1]&&r[e.pos.row+1][e.pos.col+o]&&(e.cellsAround.push(r[e.pos.row+1]&&r[e.pos.row+1][e.pos.col+o]),r[e.pos.row+1][e.pos.col+o].isMine&&t++),o++;o=-1;for(var s=0;s<2;s++)r[e.pos.row][e.pos.col+o]&&(e.cellsAround.push(r[e.pos.row][e.pos.col+o]),r[e.pos.row][e.pos.col+o].isMine&&t++),o=1;e.minesAround=t}}))})),this.setState({cells:r,result:{isWin:this.state.result.isWin,open:!1}})}},{key:"componentDidMount",value:function(){for(var e=this.state,o=e.minesMount,t=e.cellsMount,n=f.shuffle(f.range(t.row*t.col)),s=f.range(o).map((function(e){return n[e]})),r=new Array,l=0,a=0;a<t.row;a++){r[a]=new Array;for(var c=0;c<t.col;c++){var i={id:l,pos:{row:a,col:c},isMine:s.includes(l),cellsAround:new Array,minesAround:null,state:"close"};r[a].push(i),l++}}r.map((function(e){e.map((function(e){if(!e.isMine){for(var o=-1,t=0,n=0;n<3;n++)r[e.pos.row-1]&&r[e.pos.row-1][e.pos.col+o]&&(e.cellsAround.push(r[e.pos.row-1][e.pos.col+o]),r[e.pos.row-1][e.pos.col+o].isMine&&t++),r[e.pos.row+1]&&r[e.pos.row+1][e.pos.col+o]&&(e.cellsAround.push(r[e.pos.row+1]&&r[e.pos.row+1][e.pos.col+o]),r[e.pos.row+1][e.pos.col+o].isMine&&t++),o++;o=-1;for(var s=0;s<2;s++)r[e.pos.row][e.pos.col+o]&&(e.cellsAround.push(r[e.pos.row][e.pos.col+o]),r[e.pos.row][e.pos.col+o].isMine&&t++),o=1;e.minesAround=t}}))})),this.setState({cells:r})}},{key:"render",value:function(){var e=this.state,o=e.result,t=e.cells;return s.a.createElement("div",{className:"App"},s.a.createElement(d,{result:o}),s.a.createElement("div",{className:"tableCells"},s.a.createElement(h,{cells:t,openCell:this.openCell,markCell:this.markCell}),s.a.createElement(v,{onClick:this.restart,children:"restart",className:"button-restart"})))}}]),o}(n.Component),h=function(e){var o=e.cells,t=e.openCell,n=e.markCell,r=o.map((function(e,o){var r=e.map((function(e,o){var r=null;return e.isMine?r="*":e.minesAround&&(r="".concat(e.minesAround)),s.a.createElement("div",{className:"cell ".concat(e.state),key:"cell-".concat(e.id),onClick:function(){return t(e.pos)},onContextMenu:function(o){return o.preventDefault(),n(e.pos)}},s.a.createElement("div",{className:"value"},r))}));return s.a.createElement("div",{className:"cellsRow",key:"cellsRow-".concat(o)},r)}));return s.a.createElement(s.a.Fragment,null,r)},v=function(e){var o=e.onClick,t=e.className,n=void 0===t?"":t,r=e.children;return s.a.createElement("button",{onClick:o,className:n,type:"button"},r)},d=function(e){var o=e.result,t=o.isWin?"YOU WIN!":"GAME OVER",n=o.open?"result open":"result close";return s.a.createElement("div",{className:n},t)},k=w;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,o,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.b4993cc5.chunk.js.map